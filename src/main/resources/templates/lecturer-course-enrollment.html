<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml">

<head>
    <title>lecturers</title>
    <link rel="stylesheet" href="/css/list.css">
</head>
<body>
    <header>
        <div th:include="lecturer-home-page.html"></div>
    </header>

<body>

    <header>
        <div th:include="lecturer-home-page.html"></div>
    </header>

    <div class="container">
        <div class="row">
            <h1>Course Enrollment</h1>
            <div class="mb-3">
                <label for="searchInput">Search:</label>
                <input type="text" class="form-control" id="searchInput" placeholder="Enter keywords"
                    oninput="filterTable()">
            </div>
        </div>
        <div class="row">
            <div class="col-sm-6">
                <label for="showEntriesSelect">Show Entries:</label>
                <select class="form-select" id="showEntriesSelect" onchange="updateTableEntries()">
                    <option value="5">5</option>
                    <option value="10">10</option>
                    <option value="25">25</option>
                    <option value="50">50</option>
                </select>
            </div>
        </div>
        <table class="table table-striped table-bordered table-smaller" id="courseTable">
            <thead class="table-dark">
                <tr>
                    <th>Class Id</th>
                    <th>Confirmed Class Size</th>
                    <th>Room Number</th>
                    <th>Classroom Size</th>
                    <th>Start Date</th>
                    <th>Course Name</th>
                    <th>Lecturer Name</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="class: ${courseClassList}">
                    <td th:text="${class.classId}"></td>
                    <td th:text="${class.confirmed}"></td>
                    <td th:text="${class.roomNum}"></td>
                    <td th:text="${class.size}"></td>
                    <td th:text="${class.startDate}"></td>
                    <td th:text="${class.course.name}"></td>
                    <td th:text="${class.lecturer.firstName + ' ' + class.lecturer.lastName}"></td>
                </tr>
            </tbody>
        </table>
    </div>

    <script>
        var table = document.getElementById("courseTable");
        var rows = table.getElementsByTagName("tr");

        function filterTable() {
            var input = document.getElementById("searchInput");
            var filter = input.value.toUpperCase();
            for (var i = 1; i < rows.length; i++) {
                var rowData = rows[i].getElementsByTagName("td");
                var found = false;

                for (var j = 0; j < rowData.length; j++) {
                    var cell = rowData[j];
                    if (cell) {
                        var textValue = cell.textContent || cell.innerText;
                        if (textValue.toUpperCase().indexOf(filter) > -1) {
                            found = true;
                            break;
                        }
                    }
                }

                if (found) {
                    rows[i].style.display = "";
                } else {
                    rows[i].style.display = "none";
                }
            }
        }

        function updateTableEntries() {
            var selectElement = document.getElementById("showEntriesSelect");
            var numRows = parseInt(selectElement.value);

            for (var i = 1; i < rows.length; i++) {
                if (i <= numRows) {
                    rows[i].style.display = "";
                } else {
                    rows[i].style.display = "none";
                }
            }
        }
    </script>
</body>

</html>
